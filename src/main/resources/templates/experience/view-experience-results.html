<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
          integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">

    <script th:src="@{https://maps.googleapis.com/maps/api/js(key=${gmapsApiKey}, loading='async', libraries='marker,places', callback='initGMapsApi')}"
            src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDuFGE39oMheD0Y3071eSpRdA8ib4F5OFw&loading=async&libraries=marker,places&callback=initGMapsApi"
            async></script>
    <script th:src="@{/js/view-experience-results.js}"
            src="../../static/js/view-experience-results.js"
            defer></script>

    <title>Results</title>

    <style>
        #searchForm input:focus, #searchForm select:focus {
            /* Bring to top when focused (z-axis) so box-shadow outline is fully visible*/
            position: relative;
        }

        @media (min-width: 992px) {
            #searchForm [name='distanceMiles'], #searchForm [name='keywords'] {
                border-radius: 0;
            }
        }
    </style>
</head>

<body>
<main class="container">
    <form th:action="@{/experience/search}" th:object="${searchForm}" action="#" method="get"
          class="row gx-0 mx-auto justify-content-center" id="searchForm" novalidate>
        <div class="col-9 col-lg">
            <input th:value="*{locationText}" type="search" id="acLocationInput" placeholder="Location"
                   aria-label="Location" class="form-control mb-1 rounded-end-0" maxlength="1000">
        </div>
        <input th:value="*{locationText}" type="hidden" name="locationText">
        <input th:value="*{locationLat}" type="hidden" name="locationLat">
        <input th:value="*{locationLng}" type="hidden" name="locationLng">
        <div class="col-3 col-lg-auto">
            <select name="distanceMiles" aria-label="Distance" class="form-select rounded-start-0">
                <option value="1" th:selected="*{distanceMiles == 1}">1 mile</option>
                <option value="5" th:selected="*{distanceMiles == 5}">5 miles</option>
                <option value="25" th:selected="*{distanceMiles == 25}">25 miles</option>
                <option value="100" th:selected="*{distanceMiles == 100}">100 miles</option>
                <option value="500" th:selected="*{distanceMiles == 500}">500 miles</option>
            </select>
        </div>
        <!--
         Create full-width dummy div to force row to break at <lg screen sizes
         At lg+, set display = none to disable
         https://getbootstrap.com/docs/5.3/utilities/display/
         -->
        <div class="w-100 d-lg-none"></div>
        <div class="col-9 col-lg">
            <input th:value="*{keywords}" type="search" name="keywords" placeholder="Keywords" aria-label="Keywords"
                   class="form-control rounded-end-0" spellcheck="true" maxlength="100">
        </div>
        <div class="col-3 col-lg-auto">
            <button type="submit" class="btn btn-success w-100 rounded-start-0 m-0" style="white-space: nowrap">
                <i class="bi bi-search"></i> Search
            </button>
        </div>
    </form>

    <div class="row justify-content-between my-4">
        <h1 class="col">Results</h1>

    </div>

    <div th:each="experience : ${searchResult.experiences}" class="row mb-3">
        <div th:text="${experience.experienceId}" class="col-auto">1</div>
        <a th:href="@{/experience/{experienceId}(experienceId=${experience.experienceId})}"
           href="view-experience.html" class="col-auto">
            <div th:text="${experience.title}" class="col-auto">Experience title</div>
        </a>
    </div>

    <div th:if="${!searchResult.hasNext}" class="row text-center mt-5">
        <h6>End of results</h6>
    </div>
</main>
</body>

</html>
